@base-color: SkyBlue;
@menu-size: 600px;
@outer-border-width: 2px;

@menu-degrees: 180;
@offset-degrees: (@menu-degrees - 180) / 2;
@menu-items-count: 6;
@center-btn-size: @menu-size / 6;

.square(@size) {
	width: @size;
	height: @size;
}

.round() {
	border-radius: 50%;
}

.restrict-select() {
	-webkit-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
}

.circle-menu {
	position: relative;
	.wrapper {
		width: @menu-size;
		height: @menu-size / 2;
		transform: scale(0.1);
		transition: transform .3s;
		transform-origin: bottom;
		overflow: hidden;
	}
	&.active .wrapper {
		transform: scale(1);
	}
	.center {
		.square(@center-btn-size);
		.round();
		.restrict-select();

		position: absolute;
		top: (@menu-size - @center-btn-size) / 2;
		left: (@menu-size - @center-btn-size) / 2;
		background-color: white;
		border-top: 1px solid @base-color;
		z-index: 10;
		line-height: @center-btn-size / 1.5;
		text-align: center;
		font-size: 30px;
		color: @base-color;
		cursor: pointer;
	}

	ul {
		.square(@menu-size);
		.round();

		position: relative;
		list-style: none;
		overflow: hidden;
		padding: 0;

		@item-lip: 20px;
		@item-size: @menu-size / 2 + @item-lip;
		@sector-angle: round(@menu-degrees / @menu-items-count);
		@item-skew-angle: 90 - @sector-angle;
		.transform-item(@n) when (@n > 0) {
			&:nth-child(@{n}) {
				@rotation: (@n - 1) * @sector-angle - @offset-degrees;
				transform:
					rotate(~"@{rotation}deg")
					skew(~"@{item-skew-angle}deg");
			}
			.transform-item(@n - 1);
		}

		@light-bg-color: lighten(@base-color, 15%);
		.item-background(@n) when (@n > 0) {
			&:nth-child(@{n}) a {
				background-color: @base-color;
			}
			.item-even-background(@n - 1);
		}
		.item-even-background(@n) when (@n > 0) {
			&:nth-child(@{n}) a {
				background-color: @light-bg-color;
			}
			.item-background(@n - 1);
		}
		li {
			position: absolute;
			top: @item-lip * -1;
			left: @item-lip * -1;
			transform-origin: 100% 100%;
			width: @item-size;
			height: @item-size;
			overflow: hidden;
			transition: transform .3s;
			.transform-item(@menu-items-count);
			.item-background(@menu-items-count);

			.transform-item-content(@n) when (@n > 0) {
				@to-center-angle: 90 - (@sector-angle / 2);
				transform:
					skew(~"-@{item-skew-angle}deg")
					rotate(~"-@{to-center-angle}deg");
				.transform-item-content(@n - 1);
			}

			a {
				display: block;
				width: 100%;
				height: 100%;
				text-align: center;
				vertical-align: middle;
				line-height: @item-size / 2;
				.transform-item-content(@menu-items-count);

				margin-top: @item-size / 2.8;
				margin-left: @item-size / 4;

				&:hover {
					background-color: lighten(@base-color, 25%);
				}
			}
		}
	}
}
